import{T as ie,E as J,j as e,r as l}from"./index-BLCooxPD.js";const se={xs:{container:44,font:18,border:2},sm:{container:60,font:24,border:3},md:{container:80,font:32,border:3},lg:{container:120,font:48,border:4},xl:{container:160,font:64,border:4}};function X({titanId:t,size:p="md",isActive:r=!1,showInfo:d=!1,onClick:b}){const m=ie.find(h=>h.id===t),y=m?J[m.elem]:null,a=se[p];return m?e.jsxs("div",{className:"titan-portrait-v2",style:{display:"flex",flexDirection:"column",alignItems:"center",gap:"8px",cursor:b?"pointer":"default"},onClick:b,children:[e.jsxs("div",{style:{width:a.container,height:a.container,borderRadius:"50%",border:r?`${a.border+1}px solid var(--color-gold)`:`${a.border}px solid ${y?.color||"#888"}`,minWidth:"44px",minHeight:"44px",touchAction:"manipulation",WebkitTapHighlightColor:"transparent",boxShadow:r?"0 0 30px rgba(212, 168, 67, 0.6), inset 0 0 20px rgba(0,0,0,0.5)":`0 0 15px ${y?.color}40, inset 0 0 20px rgba(0,0,0,0.5)`,background:`linear-gradient(135deg, ${y?.color}40, ${y?.color}20)`,display:"flex",alignItems:"center",justifyContent:"center",fontSize:a.font,transition:"all 0.3s ease",position:"relative",overflow:"hidden"},children:[m.icon,r&&e.jsx("div",{style:{position:"absolute",inset:0,borderRadius:"50%",boxShadow:"inset 0 0 30px rgba(212, 168, 67, 0.3)",animation:"pulse-glow 2s ease-in-out infinite"}}),e.jsx("svg",{style:{position:"absolute",inset:-4,width:a.container+8,height:a.container+8,transform:"rotate(-90deg)"},children:e.jsx("circle",{cx:(a.container+8)/2,cy:(a.container+8)/2,r:a.container/2,fill:"none",stroke:"rgba(255,255,255,0.1)",strokeWidth:"3"})})]}),d&&e.jsxs("div",{style:{textAlign:"center",background:"rgba(0,0,0,0.6)",padding:"8px 12px",borderRadius:"8px",border:"1px solid var(--color-border)",minWidth:"120px"},children:[e.jsx("div",{style:{fontFamily:"var(--font-header)",fontSize:"14px",fontWeight:"bold",color:"var(--color-gold)"},children:m.name}),e.jsx("div",{style:{fontSize:"11px",color:y?.color||"#888",textTransform:"uppercase",letterSpacing:"1px"},children:m.elem})]})]}):null}const W={common:"#888",rare:"#4A9EFF",epic:"#A78BFA",legendary:"#D4A843"},le={common:"0 0 10px rgba(136,136,136,0.3)",rare:"0 0 15px rgba(74,158,255,0.4)",epic:"0 0 20px rgba(167,139,250,0.5)",legendary:"0 0 30px rgba(212,168,67,0.6)"},de={common:"0 0 20px rgba(136,136,136,0.5), 0 20px 40px rgba(0,0,0,0.6)",rare:"0 0 30px rgba(74,158,255,0.6), 0 20px 40px rgba(0,0,0,0.6)",epic:"0 0 35px rgba(167,139,250,0.7), 0 20px 40px rgba(0,0,0,0.6)",legendary:"0 0 40px rgba(212,168,67,0.8), 0 0 60px rgba(212,168,67,0.4), 0 20px 50px rgba(0,0,0,0.7)"},ce={common:"0 0 25px rgba(136,136,136,0.7), inset 0 0 15px rgba(136,136,136,0.3)",rare:"0 0 35px rgba(74,158,255,0.8), inset 0 0 20px rgba(74,158,255,0.3)",epic:"0 0 40px rgba(167,139,250,0.9), inset 0 0 25px rgba(167,139,250,0.4)",legendary:"0 0 50px rgba(212,168,67,1), 0 0 80px rgba(212,168,67,0.5), inset 0 0 30px rgba(212,168,67,0.5)"};function pe({card:t,isSelected:p=!1,canPlay:r=!1,isZoomed:d=!1,onClick:b,onMouseEnter:m,onMouseLeave:y}){const[a,h]=l.useState(!1),[u,c]=l.useState({x:0,y:0}),v=l.useRef(null),[S,i]=l.useState(!0),x=J[t.elem],f=t.rarity||"common";`${t.id}`,l.useEffect(()=>{i(!1);const z=setTimeout(()=>i(!0),50);return()=>clearTimeout(z)},[]);const E=()=>{h(!0),m?.()},A=()=>{h(!1),c({x:0,y:0}),y?.()},k=z=>{if(!v.current||d)return;const T=v.current.getBoundingClientRect(),D=((z.clientX-T.left)/T.width-.5)*2,C=((z.clientY-T.top)/T.height-.5)*2;c({x:D,y:C})},M=()=>{if(!a||d||p)return"scale(1)";const z=-u.y*10,T=u.x*10;return`translateY(-25px) scale(1.08) rotateX(${z}deg) rotateY(${T}deg)`},R=()=>x?`0 0 30px ${x.color}40, 0 0 60px ${x.color}20`:"";return e.jsxs("div",{ref:v,className:`card-v2 ${f==="legendary"?"card-shine":""} ${S?"animate-card-draw":""}`,style:{width:d?200:140,height:d?280:200,background:"var(--color-surface)",borderRadius:"12px",border:`3px solid ${p?"var(--color-gold)":W[f]}`,boxShadow:p?ce[f]:a&&r?`${de[f]}, ${R()}`:le[f],transform:M(),transition:a&&!d?"transform 0.1s ease-out, box-shadow 0.3s ease":"all 0.3s cubic-bezier(0.4, 0, 0.2, 1)",cursor:r||b?"pointer":"default",position:"relative",overflow:"hidden",zIndex:a?100:p?50:1,opacity:r?1:.6,transformStyle:"preserve-3d",perspective:"1000px"},onClick:b,onMouseEnter:E,onMouseLeave:A,onMouseMove:k,children:[e.jsx("div",{style:{position:"absolute",inset:0,background:a?`radial-gradient(circle at ${50+u.x*30}% ${50+u.y*30}%, rgba(255,255,255,0.15) 0%, transparent 60%)`:"none",pointerEvents:"none",zIndex:10,transition:"background 0.2s ease-out",borderRadius:"10px"}}),p&&e.jsx("div",{className:"selection-ring",style:{position:"absolute",inset:"-6px",borderRadius:"16px",padding:"3px",background:"linear-gradient(90deg, #D4A843, #E8C97A, #FFD700, #E8C97A, #D4A843)",backgroundSize:"200% 100%",WebkitMask:"linear-gradient(#fff 0 0) content-box, linear-gradient(#fff 0 0)",WebkitMaskComposite:"xor",maskComposite:"exclude",animation:"selectionRotate 2s linear infinite",zIndex:-1}}),r&&!p&&e.jsx("div",{style:{position:"absolute",inset:"-2px",borderRadius:"14px",border:"2px solid transparent",background:`linear-gradient(90deg, ${x?.color||"#4ADE80"}, ${x?.color?xe(x.color,30):"#86EFAC"}, ${x?.color||"#4ADE80"}) border-box`,WebkitMask:"linear-gradient(#fff 0 0) padding-box, linear-gradient(#fff 0 0)",WebkitMaskComposite:"xor",maskComposite:"exclude",backgroundSize:"200% 100%",animation:"selectionRotate 3s linear infinite",opacity:a?1:.6,transition:"opacity 0.3s ease",zIndex:-1}}),e.jsxs("div",{style:{height:"55%",background:`linear-gradient(135deg, ${x?.color}40, ${x?.color}15)`,position:"relative",borderBottom:`2px solid ${W[f]}`,overflow:"hidden"},children:[e.jsx("div",{style:{position:"absolute",inset:0,background:a?"linear-gradient(135deg, rgba(255,255,255,0.1) 0%, transparent 50%, rgba(0,0,0,0.2) 100%)":"linear-gradient(180deg, transparent 60%, rgba(0,0,0,0.3) 100%)",transition:"background 0.3s ease"}}),e.jsx("div",{style:{position:"absolute",top:8,left:8,width:32,height:32,borderRadius:"50%",background:"linear-gradient(135deg, var(--color-mana), #6BB6FF)",display:"flex",alignItems:"center",justifyContent:"center",fontFamily:"var(--font-mono)",fontWeight:"bold",fontSize:"16px",color:"#000",boxShadow:"0 2px 10px rgba(0,0,0,0.5), inset 0 1px 0 rgba(255,255,255,0.3)",border:"2px solid rgba(255,255,255,0.2)",zIndex:5},children:t.cost}),e.jsx("div",{style:{position:"absolute",top:8,right:8,padding:"4px 10px",borderRadius:"4px",background:x?.color||"#888",fontSize:"10px",fontWeight:"bold",textTransform:"uppercase",color:"#fff",letterSpacing:"1px",boxShadow:"0 2px 8px rgba(0,0,0,0.4)",border:"1px solid rgba(255,255,255,0.2)",zIndex:5},children:t.elem}),(f==="legendary"||f==="epic")&&e.jsx("div",{style:{position:"absolute",bottom:8,left:"50%",transform:"translateX(-50%)",padding:"3px 10px",borderRadius:"10px",background:f==="legendary"?"linear-gradient(90deg, #D4A843, #E8C97A, #D4A843)":"linear-gradient(90deg, #A78BFA, #C4B5FD, #A78BFA)",fontSize:"8px",fontWeight:"bold",textTransform:"uppercase",color:f==="legendary"?"#000":"#fff",letterSpacing:"2px",boxShadow:"0 2px 8px rgba(0,0,0,0.5)",zIndex:5},children:f}),e.jsx("div",{style:{position:"absolute",inset:0,display:"flex",alignItems:"center",justifyContent:"center",fontSize:"48px",opacity:a?.7:.5,transform:a?"scale(1.1)":"scale(1)",transition:"all 0.3s ease",filter:a?"drop-shadow(0 0 10px rgba(255,255,255,0.3))":"none"},children:t.type==="unit"?"âš”ï¸":t.type==="spell"?"âœ¨":"ðŸ›ï¸"})]}),e.jsxs("div",{style:{padding:"10px",height:"45%",display:"flex",flexDirection:"column",gap:"4px",position:"relative",zIndex:5},children:[e.jsx("div",{style:{fontFamily:"var(--font-header)",fontSize:"13px",fontWeight:"bold",color:f==="legendary"?"#FFD700":"var(--color-gold)",lineHeight:1.2,textAlign:"center",textShadow:f==="legendary"?"0 0 10px rgba(255,215,0,0.5)":"none"},children:t.name}),e.jsxs("div",{style:{fontSize:"10px",color:"#888",textTransform:"uppercase",letterSpacing:"1px",textAlign:"center"},children:[t.type,t.race?` â€¢ ${t.race}`:""]}),e.jsx("div",{style:{fontSize:"10px",color:"#aaa",lineHeight:1.3,flex:1,overflow:"hidden",display:"-webkit-box",WebkitLineClamp:3,WebkitBoxOrient:"vertical"},children:t.text}),t.type!=="spell"&&e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginTop:"auto",paddingTop:"6px",borderTop:"1px solid var(--color-border)"},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"4px",fontFamily:"var(--font-mono)",fontSize:"16px",fontWeight:"bold",color:"var(--color-danger)",textShadow:"0 0 10px rgba(248, 113, 113, 0.4)"},children:["âš”ï¸ ",t.atk||0]}),e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"4px",fontFamily:"var(--font-mono)",fontSize:"16px",fontWeight:"bold",color:"var(--color-success)",textShadow:"0 0 10px rgba(74, 222, 128, 0.4)"},children:["â¤ï¸ ",t.hp||0]})]})]}),e.jsx("div",{style:{position:"absolute",bottom:0,left:0,right:0,height:"4px",background:f==="legendary"?"linear-gradient(90deg, #D4A843, #E8C97A, #FFD700, #E8C97A, #D4A843)":W[f],backgroundSize:f==="legendary"?"200% 100%":"100%",animation:f==="legendary"?"selectionRotate 3s linear infinite":"none"}})]})}function xe(t,p){const r=parseInt(t.replace("#",""),16),d=Math.round(2.55*p),b=(r>>16)+d,m=(r>>8&255)+d,y=(r&255)+d;return"#"+(16777216+(b<255?b<1?0:b:255)*65536+(m<255?m<1?0:m:255)*256+(y<255?y<1?0:y:255)).toString(16).slice(1)}const q=()=>Math.random().toString(36).substr(2,9),_={dust:{colors:["#8B7355","#A0926D","#6B5B45","#C4B49C"],minSize:2,maxSize:6,minVelocity:-1,maxVelocity:1,gravity:.05,drag:.98},spark:{colors:["#FFD700","#FFA500","#FF6347","#FFE4B5"],minSize:2,maxSize:4,minVelocity:-3,maxVelocity:3,gravity:.15,drag:.95},magic:{colors:["#A78BFA","#F472B6","#60A5FA","#34D399"],minSize:3,maxSize:8,minVelocity:-2,maxVelocity:2,gravity:-.02,drag:.97},confetti:{colors:["#FFD700","#FF6B6B","#4ECDC4","#95E1D3","#FFA07A","#98D8C8"],minSize:6,maxSize:12,minVelocity:-5,maxVelocity:5,gravity:.2,drag:.99},ember:{colors:["#FF4500","#FF6347","#FFA500","#FFD700"],minSize:2,maxSize:5,minVelocity:-1.5,maxVelocity:1.5,gravity:-.08,drag:.96},ice:{colors:["#A5F3FC","#67E8F9","#22D3EE","#06B6D4"],minSize:3,maxSize:7,minVelocity:-2,maxVelocity:2,gravity:.03,drag:.99},poison:{colors:["#86EFAC","#4ADE80","#22C55E","#16A34A"],minSize:3,maxSize:6,minVelocity:-1,maxVelocity:1,gravity:-.03,drag:.98}};function ge(){const[t,p]=l.useState({particles:[],damageNumbers:[]}),r=l.useCallback((a,h,u,c=10,v=30)=>{const S=_[u],i=[];for(let x=0;x<c;x++){const f=Math.random()*Math.PI*2,E=Math.random()*3+1,A=Math.random()*(S.maxSize-S.minSize)+S.minSize;i.push({id:q(),x:a+(Math.random()-.5)*v,y:h+(Math.random()-.5)*v,type:u,size:A,color:S.colors[Math.floor(Math.random()*S.colors.length)],velocityX:Math.cos(f)*E*(Math.random()*2+.5),velocityY:Math.sin(f)*E*(Math.random()*2+.5),life:1,maxLife:Math.random()*30+30,rotation:Math.random()*360,rotationSpeed:(Math.random()-.5)*10})}p(x=>({...x,particles:[...x.particles,...i]}))},[]),d=l.useCallback((a,h,u,c="damage",v=!1)=>{const S={id:q(),x:a,y:h,value:u,type:c,isCritical:v};p(i=>({...i,damageNumbers:[...i.damageNumbers,S]})),setTimeout(()=>{p(i=>({...i,damageNumbers:i.damageNumbers.filter(x=>x.id!==S.id)}))},1500)},[]),b=l.useCallback((a,h,u="medium")=>{const c={small:8,medium:15,large:30};r(a,h,"spark",c[u],40),r(a,h,"dust",Math.floor(c[u]/2),50)},[r]),m=l.useCallback((a,h,u)=>{r(a,h,{fire:"ember",ice:"ice",nature:"poison",arcane:"magic",shadow:"dust"}[u]||"magic",20,40)},[r]),y=l.useCallback((a,h)=>{for(let u=0;u<8;u++){const c=u/8*Math.PI*2,v=200,S=a+Math.cos(c)*v,i=h+Math.sin(c)*v;setTimeout(()=>{r(S,i,"confetti",25,100)},u*100)}r(a,h,"confetti",50,150),r(a,h,"magic",30,100)},[r]);return l.useEffect(()=>{let a;const h=()=>{p(u=>({...u,particles:u.particles.map(c=>{const v=_[c.type];return{...c,x:c.x+c.velocityX,y:c.y+c.velocityY,velocityX:c.velocityX*v.drag,velocityY:c.velocityY*v.drag+v.gravity,rotation:c.rotation+c.rotationSpeed,life:c.life-1/c.maxLife}}).filter(c=>c.life>0)})),a=requestAnimationFrame(h)};return a=requestAnimationFrame(h),()=>cancelAnimationFrame(a)},[]),{particles:t.particles,damageNumbers:t.damageNumbers,spawnParticles:r,spawnDamageNumber:d,spawnExplosion:b,spawnElementEffect:m,spawnVictoryConfetti:y}}function ue({particles:t,damageNumbers:p}){return e.jsxs("div",{style:{position:"fixed",inset:0,pointerEvents:"none",zIndex:9999,overflow:"hidden"},children:[t.map(r=>{const d=r.life,b=r.type==="confetti"?1:.5+r.life*.5;return e.jsx("div",{style:{position:"absolute",left:r.x,top:r.y,width:r.size,height:r.type==="confetti"?r.size*.6:r.size,backgroundColor:r.color,borderRadius:r.type==="confetti"?"2px":"50%",opacity:d,transform:`translate(-50%, -50%) rotate(${r.rotation}deg) scale(${b})`,boxShadow:r.type==="magic"||r.type==="ember"?`0 0 ${r.size*2}px ${r.color}`:"none",transition:"none"}},r.id)}),p.map(r=>{const d={damage:"#F87171",heal:"#4ADE80",critical:"#FFD700",miss:"#9CA3AF"},b={damage:r.isCritical?32:24,heal:28,critical:48,miss:20};return e.jsx("div",{className:`damage-number damage-number-${r.type}`,style:{position:"absolute",left:r.x,top:r.y,color:d[r.type],fontSize:b[r.type],fontWeight:"bold",fontFamily:"var(--font-header), Cinzel, Georgia, serif",textShadow:`0 0 20px ${d[r.type]}`,pointerEvents:"none",transform:"translate(-50%, -50%)"},children:r.type==="miss"?"MISS":r.type==="heal"?`+${r.value}`:r.type==="critical"?`${r.value}!`:`-${r.value}`},r.id)})]})}function he({intensity:t="medium",duration:p=500,trigger:r,children:d}){const[b,m]=l.useState(!1);l.useEffect(()=>{if(r){m(!0);const a=setTimeout(()=>m(!1),p);return()=>clearTimeout(a)}},[r,p]);const y={light:"screen-shake-light",medium:"screen-shake-medium",heavy:"screen-shake-heavy"};return e.jsx("div",{className:b?y[t]:"",style:{width:"100%",height:"100%"},children:d})}function fe({player:t,isVisible:p,onComplete:r}){if(l.useEffect(()=>{if(p&&r){const y=setTimeout(r,2e3);return()=>clearTimeout(y)}},[p,r]),!p)return null;const d=["#4A9EFF","#F87171"],b=["Player 1","Player 2"],m=["var(--color-p1)","var(--color-p2)"];return e.jsxs("div",{className:"turn-transition-overlay",style:{position:"fixed",inset:0,display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",zIndex:1e4,pointerEvents:"none"},children:[e.jsx("div",{className:"turn-transition-flash",style:{position:"absolute",inset:0,background:`radial-gradient(circle at center, ${d[t]}40 0%, transparent 70%)`}}),e.jsxs("div",{className:"turn-transition-text",style:{fontFamily:"var(--font-header), Cinzel, Georgia, serif",fontSize:"72px",fontWeight:"bold",color:m[t],textShadow:`0 0 40px ${d[t]}, 0 0 80px ${d[t]}80`,textAlign:"center"},children:[b[t],"'s Turn"]}),e.jsx("div",{className:"turn-transition-lines",style:{marginTop:"20px"},children:e.jsx("div",{style:{width:"300px",height:"3px",background:`linear-gradient(90deg, transparent, ${d[t]}, transparent)`,margin:"0 auto"}})})]})}const P=["Refresh","Draw","Deploy","Movement","Combat","End"];function me({gameState:t,logs:p,showTurnOverlay:r,victory:d,onNextPhase:b,onCellClick:m,onCardClick:y,onActivateTitan:a,onDismissTurnOverlay:h,onBackToMenu:u,myPlayerIdx:c=0,isMultiplayer:v=!1}){const S=l.useRef(null),i=t.ap,x=!v||i===c,f=t.p[i],{particles:E,damageNumbers:A,spawnParticles:k,spawnDamageNumber:M,spawnExplosion:R,spawnElementEffect:z,spawnVictoryConfetti:T}=ge(),[D,C]=l.useState(!1),[K,N]=l.useState("medium"),[O,V]=l.useState(!1),[Q,Z]=l.useState(0),I=l.useRef(null),[G,H]=l.useState([]),[L,U]=l.useState(null);l.useEffect(()=>{S.current?.scrollIntoView({behavior:"smooth"})},[p.length]),l.useEffect(()=>{d&&setTimeout(()=>{T(window.innerWidth/2,window.innerHeight/2),N("heavy"),C(!0),setTimeout(()=>C(!1),800)},500)},[d,T]),l.useEffect(()=>{r?(Z(i),V(!0)):V(!1)},[r,i]),l.useEffect(()=>{if(!I.current){I.current=t;return}const o=I.current;for(let n=0;n<5;n++)for(let s=0;s<7;s++){const g=t.board[n][s],w=o.board[n][s];if(g&&!w){const j=`${g.owner}-${g.id||"unknown"}-${Date.now()}`;H(F=>[...F,{key:j,row:n,col:s,animState:"spawn"}]),setTimeout(()=>{const F=B(n,s);F&&k(F.x,F.y,"magic",15,40)},100),setTimeout(()=>{H(F=>F.filter($=>$.key!==j))},600)}}t.p.forEach((n,s)=>{const g=o.p[s].hp;if(n.hp!==g){const w=g-n.hp;if(w>0){N(w>=5?"heavy":w>=3?"medium":"light"),C(!0),setTimeout(()=>C(!1),w>=5?800:600);const j=s===0?{x:100,y:window.innerHeight-100}:{x:100,y:100};M(j.x,j.y,w,"damage",w>=5),R(j.x,j.y,w>=5?"large":"medium")}}}),I.current=t},[t,k,M,R]);const B=l.useCallback((o,n)=>{const s=document.querySelector(".battle-grid")?.getBoundingClientRect();if(!s)return null;const g=s.width/7,w=s.height/5;return{x:s.left+n*g+g/2,y:s.top+o*w+w/2}},[]),ee=l.useCallback((o,n)=>{const s=B(o,n);s&&k(s.x,s.y,"dust",5,20),m(o,n)},[m,B,k]),te=l.useCallback(o=>{const s=document.querySelectorAll(".card-v2")[o];if(s){const g=s.getBoundingClientRect();k(g.left+g.width/2,g.top+g.height/2,"magic",10,30)}y(o)},[y,k]),re=l.useCallback(()=>{N("medium"),C(!0),setTimeout(()=>C(!1),600);const o=i===0?{x:80,y:window.innerHeight-150}:{x:80,y:150};z(o.x,o.y,"arcane"),a()},[a,i,z]),oe=l.useCallback(()=>{k(window.innerWidth/2,window.innerHeight/2,"spark",8,100),b()},[b,k]),ae=()=>{const o=[];for(let n=0;n<5;n++)for(let s=0;s<7;s++){const g=t.board[n][s],w=i===0?n>=3:n<=1,j=w&&t.phase===2&&!g,F=G.find(Y=>Y.row===n&&Y.col===s),$=L?.r===n&&L?.c===s,ne=t.sel?.type==="card"&&j;o.push(e.jsxs("div",{className:`grid-cell ${g?"has-unit":""} ${t.sel?.type==="unit"&&t.sel.r===n&&t.sel.c===s?"selected":""} ${ne?"valid-target-friendly":""}`,style:{aspectRatio:"1",background:j?"rgba(74, 222, 128, 0.15)":$&&j?"rgba(74, 222, 128, 0.25)":"var(--color-surface)",border:"1px solid",borderColor:j?"rgba(74, 222, 128, 0.5)":$?"rgba(212, 168, 67, 0.5)":"var(--color-border)",borderRadius:"8px",position:"relative",cursor:j||g?"pointer":"default",transition:"all 0.2s ease",transform:$&&j?"scale(1.02)":"scale(1)"},onClick:()=>ee(n,s),onMouseEnter:()=>U({r:n,c:s}),onMouseLeave:()=>U(null),children:[j&&e.jsx("div",{style:{position:"absolute",inset:"4px",borderRadius:"6px",border:"1px dashed rgba(74, 222, 128, 0.4)",pointerEvents:"none"}}),w&&e.jsx("div",{style:{position:"absolute",top:"2px",right:"4px",width:"6px",height:"6px",borderRadius:"50%",background:i===0?"var(--color-p1)":"var(--color-p2)",opacity:.5}}),g&&e.jsxs("div",{className:F?.animState==="spawn"?"animate-unit-spawn":"",style:{position:"absolute",inset:4,borderRadius:"6px",background:"linear-gradient(135deg, var(--color-surface-light), var(--color-surface))",border:`2px solid ${g.owner===0?"var(--color-p1)":"var(--color-p2)"}`,display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",fontSize:"10px",overflow:"hidden",boxShadow:t.sel?.type==="unit"&&t.sel.r===n&&t.sel.c===s?`0 0 20px ${g.owner===0?"rgba(74, 158, 255, 0.6)":"rgba(248, 113, 113, 0.6)"}, inset 0 0 20px ${g.owner===0?"rgba(74, 158, 255, 0.3)":"rgba(248, 113, 113, 0.3)"}`:"0 2px 8px rgba(0,0,0,0.4)",animation:t.sel?.type==="unit"&&t.sel.r===n&&t.sel.c===s?"unitSelectedPulse 1.5s ease-in-out infinite":"none"},children:[e.jsx("span",{style:{fontSize:"22px",filter:"drop-shadow(0 2px 4px rgba(0,0,0,0.5))"},children:g.type==="structure"?"ðŸ›ï¸":"âš”ï¸"}),e.jsxs("div",{style:{position:"absolute",bottom:0,left:0,right:0,display:"flex",justifyContent:"space-between",alignItems:"center",padding:"3px 6px",background:"linear-gradient(180deg, transparent, rgba(0,0,0,0.8))",fontSize:"11px",fontWeight:"bold",fontFamily:"var(--font-mono)"},children:[e.jsx("span",{style:{color:"var(--color-danger)",textShadow:"0 0 5px rgba(248, 113, 113, 0.5)"},children:g.atk}),e.jsx("span",{style:{color:"var(--color-success)",textShadow:"0 0 5px rgba(74, 222, 128, 0.5)"},children:g.hp})]}),e.jsx("div",{style:{position:"absolute",top:"3px",left:"3px",width:"8px",height:"8px",borderRadius:"50%",background:g.owner===0?"var(--color-p1)":"var(--color-p2)",boxShadow:`0 0 5px ${g.owner===0?"var(--color-p1)":"var(--color-p2)"}`}})]})]},`${n}-${s}`))}return o};return e.jsxs(e.Fragment,{children:[e.jsx(ue,{particles:E,damageNumbers:A}),e.jsx(fe,{player:Q,isVisible:O}),e.jsx(he,{intensity:K,duration:800,trigger:D,children:e.jsxs("div",{className:"battle-screen-v2",style:{height:"100vh",width:"100vw",display:"flex",flexDirection:"column",background:"var(--color-bg)",overflow:"hidden"},children:[e.jsxs("div",{style:{height:"80px",background:"linear-gradient(180deg, var(--color-surface), transparent)",display:"flex",alignItems:"center",padding:"0 20px",gap:"20px",borderBottom:"1px solid var(--color-border)",position:"relative"},children:[i===1&&e.jsx("div",{style:{position:"absolute",left:0,top:0,bottom:0,width:"4px",background:"linear-gradient(180deg, var(--color-p2), transparent)",boxShadow:"0 0 20px var(--color-p2)"}}),e.jsx(X,{titanId:t.p[1].titan?.id||"kargath",size:"sm",isActive:i===1}),e.jsxs("div",{style:{flex:1},children:[e.jsxs("div",{style:{fontFamily:"var(--font-header)",color:i===1?"var(--color-p2)":"var(--color-gold)",textShadow:i===1?"0 0 10px var(--color-p2)":"none",transition:"all 0.3s ease"},children:["Player 2",i===1&&e.jsx("span",{style:{marginLeft:"8px",fontSize:"12px"},children:"â—€ TURN"})]}),e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"10px",marginTop:"4px"},children:[e.jsx("div",{style:{width:"150px",height:"12px",background:"rgba(0,0,0,0.5)",borderRadius:"6px",overflow:"hidden",border:"1px solid rgba(255,255,255,0.1)"},children:e.jsx("div",{className:"hp-bar-fill",style:{width:`${t.p[1].hp/40*100}%`,height:"100%",background:"linear-gradient(90deg, var(--color-danger), #FF8888)",transition:"width 0.5s cubic-bezier(0.4, 0, 0.2, 1)",boxShadow:"0 0 10px rgba(248, 113, 113, 0.5)"}})}),e.jsxs("span",{style:{fontSize:"12px",color:"#888"},children:[t.p[1].hp,"/40"]})]})]}),e.jsx("div",{style:{textAlign:"right"},children:e.jsxs("div",{style:{fontSize:"24px",color:"var(--color-mana)",textShadow:"0 0 15px rgba(74, 158, 255, 0.5)"},children:[t.p[1].energy," âš¡"]})})]}),e.jsxs("div",{style:{flex:1,display:"flex",gap:"20px",padding:"20px"},children:[e.jsx("div",{className:"battle-grid",style:{flex:1,display:"grid",gridTemplateColumns:"repeat(7, 1fr)",gridTemplateRows:"repeat(5, 1fr)",gap:"8px",maxWidth:"800px",margin:"0 auto",padding:"10px",background:"rgba(0,0,0,0.2)",borderRadius:"12px",border:"1px solid rgba(255,255,255,0.05)"},children:ae()}),e.jsxs("div",{style:{width:"250px",background:"var(--color-surface)",borderRadius:"12px",border:"1px solid var(--color-border)",display:"flex",flexDirection:"column",overflow:"hidden",boxShadow:"0 10px 40px rgba(0,0,0,0.4)"},children:[e.jsxs("div",{style:{padding:"16px",borderBottom:"1px solid var(--color-border)",background:"linear-gradient(180deg, rgba(212,168,67,0.1), transparent)"},children:[e.jsxs("div",{style:{fontSize:"12px",color:"#888",marginBottom:"8px",letterSpacing:"2px"},children:["TURN ",t.turn]}),e.jsx("div",{style:{fontFamily:"var(--font-header)",fontSize:"20px",color:"var(--color-gold)",textShadow:"0 0 20px rgba(212, 168, 67, 0.4)"},children:P[t.phase]}),e.jsx("div",{style:{display:"flex",gap:"4px",marginTop:"12px"},children:P.map((o,n)=>e.jsx("div",{style:{flex:1,height:"4px",borderRadius:"2px",background:n===t.phase?"linear-gradient(90deg, var(--color-gold), var(--color-gold-light))":n<t.phase?"#555":"var(--color-border)",boxShadow:n===t.phase?"0 0 10px rgba(212, 168, 67, 0.5)":"none",transition:"all 0.3s ease"}},o))})]}),e.jsx("div",{style:{padding:"12px 16px"},children:e.jsx("button",{onClick:oe,style:{width:"100%",padding:t.phase===5?"16px":"12px",background:t.phase===5?"linear-gradient(135deg, var(--color-gold), var(--color-gold-light))":"linear-gradient(135deg, var(--color-blue), var(--color-blue-light))",border:"none",borderRadius:"8px",color:t.phase===5?"#000":"#fff",fontWeight:"bold",fontSize:t.phase===5?"16px":"14px",cursor:"pointer",boxShadow:t.phase===5?"0 0 25px rgba(212,168,67,0.5), 0 4px 10px rgba(0,0,0,0.3)":"0 4px 10px rgba(0,0,0,0.3)",animation:t.phase===5?"pulse-glow 1.5s infinite":"none",transition:"all 0.2s ease",position:"relative",overflow:"hidden"},onMouseEnter:o=>{o.currentTarget.style.transform="translateY(-2px)",o.currentTarget.style.boxShadow=t.phase===5?"0 0 35px rgba(212,168,67,0.7), 0 6px 15px rgba(0,0,0,0.4)":"0 6px 15px rgba(0,0,0,0.4)"},onMouseLeave:o=>{o.currentTarget.style.transform="translateY(0)",o.currentTarget.style.boxShadow=t.phase===5?"0 0 25px rgba(212,168,67,0.5), 0 4px 10px rgba(0,0,0,0.3)":"0 4px 10px rgba(0,0,0,0.3)"},children:t.phase===5?"ðŸ”„ END TURN":`Next: ${P[t.phase+1]||"New Turn"} â†’`})}),e.jsxs("div",{style:{flex:1,overflow:"auto",padding:"12px 16px",fontSize:"12px",lineHeight:1.5},className:"scrollbar-hide",children:[p.map((o,n)=>e.jsx("div",{style:{padding:"6px 0",borderBottom:"1px solid rgba(255,255,255,0.05)",color:n===p.length-1?"#fff":"#888",animation:n===p.length-1?"phaseSlide 0.3s ease-out":"none"},children:o},n)),e.jsx("div",{ref:S})]}),e.jsx("div",{style:{padding:"12px 16px",borderTop:"1px solid var(--color-border)"},children:e.jsx("button",{onClick:u,style:{width:"100%",padding:"10px",background:"transparent",border:"1px solid var(--color-border)",borderRadius:"6px",color:"#888",fontSize:"12px",cursor:"pointer",transition:"all 0.2s ease"},onMouseEnter:o=>{o.currentTarget.style.borderColor="var(--color-gold)",o.currentTarget.style.color="var(--color-gold)"},onMouseLeave:o=>{o.currentTarget.style.borderColor="var(--color-border)",o.currentTarget.style.color="#888"},children:"â† Back to Menu"})})]})]}),e.jsxs("div",{style:{background:"var(--color-surface)",borderTop:"1px solid var(--color-border)",position:"relative"},children:[i===0&&e.jsx("div",{style:{position:"absolute",left:0,top:0,right:0,height:"3px",background:"linear-gradient(90deg, var(--color-p1), transparent 50%)",boxShadow:"0 0 20px var(--color-p1)"}}),e.jsxs("div",{style:{height:"70px",display:"flex",alignItems:"center",padding:"0 20px",gap:"20px",borderBottom:"1px solid var(--color-border)"},children:[e.jsx(X,{titanId:t.p[0].titan?.id||"kargath",size:"sm",isActive:i===0}),e.jsxs("div",{style:{flex:1},children:[e.jsxs("div",{style:{fontFamily:"var(--font-header)",color:i===0?"var(--color-p1)":"var(--color-gold)",textShadow:i===0?"0 0 10px var(--color-p1)":"none",transition:"all 0.3s ease"},children:["Player 1",i===0&&e.jsx("span",{style:{marginLeft:"8px",fontSize:"12px"},children:"â—€ YOUR TURN"})]}),e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"10px",marginTop:"4px"},children:[e.jsx("div",{style:{width:"150px",height:"12px",background:"rgba(0,0,0,0.5)",borderRadius:"6px",overflow:"hidden",border:"1px solid rgba(255,255,255,0.1)"},children:e.jsx("div",{className:"hp-bar-fill",style:{width:`${t.p[0].hp/40*100}%`,height:"100%",background:"linear-gradient(90deg, var(--color-success), #6EE89C)",transition:"width 0.5s cubic-bezier(0.4, 0, 0.2, 1)",boxShadow:"0 0 10px rgba(74, 222, 128, 0.5)"}})}),e.jsxs("span",{style:{fontSize:"12px",color:"#888"},children:[t.p[0].hp,"/40"]})]})]}),e.jsx("div",{style:{textAlign:"right"},children:e.jsxs("div",{style:{fontSize:"24px",color:"var(--color-mana)",textShadow:"0 0 15px rgba(74, 158, 255, 0.5)"},children:[t.p[0].energy," âš¡"]})}),e.jsx("button",{onClick:re,disabled:!x,style:{padding:"10px 20px",background:x?"linear-gradient(135deg, var(--color-arcane), #F9A8D4)":"var(--color-surface-light)",border:"none",borderRadius:"8px",color:"#fff",fontSize:"12px",fontWeight:"bold",cursor:x?"pointer":"not-allowed",opacity:x?1:.5,boxShadow:x?"0 0 20px rgba(244, 114, 182, 0.4)":"none",transition:"all 0.2s ease",position:"relative",overflow:"hidden"},onMouseEnter:o=>{x&&(o.currentTarget.style.transform="scale(1.05)",o.currentTarget.style.boxShadow="0 0 30px rgba(244, 114, 182, 0.6)")},onMouseLeave:o=>{o.currentTarget.style.transform="scale(1)",o.currentTarget.style.boxShadow=x?"0 0 20px rgba(244, 114, 182, 0.4)":"none"},children:"âœ¨ Ability"})]}),x&&e.jsx("div",{style:{height:"240px",padding:"20px 24px",display:"flex",gap:"16px",overflowX:"auto",overflowY:"visible",alignItems:"center"},className:"scrollbar-hide",children:f.hand.map((o,n)=>e.jsx(pe,{card:o,canPlay:t.phase===2&&f.energy>=o.cost,isSelected:t.sel?.type==="card"&&t.sel.idx===n,onClick:()=>te(n)},`${o.id}-${n}`))}),!x&&e.jsxs("div",{style:{height:"240px",display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",color:"#888",fontSize:"14px",gap:"12px"},children:[e.jsx("div",{className:"spinner",style:{fontSize:"24px"},children:"â³"}),e.jsx("span",{children:"Waiting for opponent..."})]})]}),r&&e.jsxs("div",{style:{position:"fixed",inset:0,background:"rgba(0,0,0,0.9)",display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",zIndex:1e3,cursor:"pointer"},onClick:h,children:[e.jsx("div",{className:"animate-victory",style:{fontSize:"64px",marginBottom:"20px",filter:"drop-shadow(0 0 30px currentColor)"},children:i===0?"ðŸ”µ":"ðŸ”´"}),e.jsxs("h1",{style:{fontFamily:"var(--font-header)",fontSize:"48px",color:i===0?"var(--color-p1)":"var(--color-p2)",marginBottom:"20px",textShadow:`0 0 40px ${i===0?"var(--color-p1)":"var(--color-p2)"}`},children:["Player ",i+1,"'s Turn"]}),e.jsx("p",{style:{color:"#888",fontSize:"18px"},children:"Click anywhere to start"}),e.jsx("button",{style:{marginTop:"40px",padding:"16px 48px",background:"var(--color-gold)",border:"none",borderRadius:"8px",color:"#000",fontSize:"18px",fontWeight:"bold",cursor:"pointer",boxShadow:"0 0 30px rgba(212, 168, 67, 0.5)",transition:"all 0.2s ease"},onMouseEnter:o=>{o.currentTarget.style.transform="scale(1.05)",o.currentTarget.style.boxShadow="0 0 40px rgba(212, 168, 67, 0.7)"},onMouseLeave:o=>{o.currentTarget.style.transform="scale(1)",o.currentTarget.style.boxShadow="0 0 30px rgba(212, 168, 67, 0.5)"},onClick:o=>{o.stopPropagation(),h()},children:"Start Turn"})]}),d&&e.jsxs("div",{style:{position:"fixed",inset:0,background:"rgba(0,0,0,0.95)",display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",zIndex:1e3},children:[e.jsx("div",{className:"animate-victory animate-victory-glow",style:{fontSize:"80px",marginBottom:"10px"},children:"ðŸ†"}),e.jsx("h1",{className:"animate-victory-glow",style:{fontFamily:"var(--font-header)",fontSize:"72px",color:"var(--color-gold)",marginBottom:"20px"},children:"Victory!"}),e.jsxs("p",{style:{fontSize:"32px",color:"#fff",marginBottom:"40px",textShadow:"0 0 20px rgba(255,255,255,0.3)"},children:["Player ",d.winner+1," Wins!"]}),e.jsx("button",{onClick:u,style:{padding:"18px 56px",background:"linear-gradient(135deg, var(--color-gold), var(--color-gold-light))",border:"none",borderRadius:"8px",color:"#000",fontSize:"20px",fontWeight:"bold",cursor:"pointer",boxShadow:"0 0 40px rgba(212, 168, 67, 0.5)",transition:"all 0.2s ease"},onMouseEnter:o=>{o.currentTarget.style.transform="scale(1.05)",o.currentTarget.style.boxShadow="0 0 50px rgba(212, 168, 67, 0.7)"},onMouseLeave:o=>{o.currentTarget.style.transform="scale(1)",o.currentTarget.style.boxShadow="0 0 40px rgba(212, 168, 67, 0.5)"},children:"Back to Menu"})]})]})})]})}export{me as default};
